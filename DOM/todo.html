<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do</title>
    <style>
        #lista input[type=text],
        #lista input[type=date] {
            display: none;
        }

        #lista .editMode input[type=text],
        #lista .editMode input[type=date] {
            display: block;
        }

        #lista .editMode label {
            display: none;
        }
    </style>
</head>
<body>

    <form id="todoForm">
        <label for="tarea">Tarea:</label><br>
        <input type="text" id="tarea" name="tarea"><br>

        <label for="tiempo">Tiempo:</label><br>
        <input type="text" id="tiempo" name="tiempo"><br>

        <label for="deadline">Deadline:</label><br>
        <input type="date" id="deadline" name="deadline"><br>

        <label for="alta">Alta:</label><br>
        <input type="date" id="alta" name="alta"><br>

        <label for="estado">Estado:</label><br>
        <input type="text" id="estado" name="estado"><br>

        <label for="desc">Descripción:</label><br>
        <input type="text" id="desc" name="desc"><br><br>
        <input type="submit" value="Submit">
    </form> 

    <table id="lista">
        <thead>
            <tr>
                <th>#</th>
                <th>Nombre</th>
                <th>Tiempo</th>
                <th>Deadline</th>
                <th>Alta</th>
                <th>Estado</th>
                <th>Descripción</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    
    <script>
        let count = 0;

        document.getElementById('todoForm').addEventListener('submit', function(event) {
            event.preventDefault(); 

            count++;
          
            const nombre = document.getElementById('tarea').value;
            const tiempo = document.getElementById('tiempo').value;
            const deadline = document.getElementById('deadline').value;
            const alta = document.getElementById('alta').value;
            const estado = document.getElementById('estado').value;
            const desc = document.getElementById('desc').value;

            const lista = document.getElementById('lista');
            const fila = document.createElement("tr");

            fila.innerHTML = `
                <td>
                    <label>${count}</label>
                </td>
                <td>
                    <label id="lNombre">${nombre}</label>
                    <input id="iNombre" type="text" value="${nombre}">
                </td>
                <td>
                    <label id="lTiempo">${tiempo}</label>
                    <input id="iTiempo" type="text" value="${tiempo}">
                </td>
                <td>
                    <label id="lDead">${deadline}</label>
                    <input id="iDead" type="date" value="${deadline}">
                </td>
                <td>
                    <label id="lAlta">${alta}</label>
                    <input id="iAlta" type="date" value="${alta}">
                </td>
                <td>
                    <label id="lEstado">${estado}</label>
                    <input id="iEstado" type="text" value="${estado}">
                </td>
                <td>
                    <label id="lDesc">${desc}</label>
                    <input id="iDesc" type="text" value="${desc}">
                </td>
                <td>
                    <button class="eliminar">Eliminar</button>
                    <button class="modificar">Modificar</button>
                    <button class="cambiar">Cambiar estado</button>
                </td>
            `;

            lista.querySelector('tbody').appendChild(fila);

            // Eliminar fila
            fila.querySelector('.eliminar').addEventListener('click', function() {
                fila.remove();
            });

            // Modificar fila
            fila.querySelector('.modificar').addEventListener('click', function() {
                const eleccion = this.closest('tr');
                eleccion.classList.toggle("editMode");

                const lNombre = eleccion.querySelector("#lNombre");
                const iNombre = eleccion.querySelector("#iNombre");

                const lTiempo = eleccion.querySelector("#lTiempo");
                const iTiempo = eleccion.querySelector("#iTiempo");

                const lDead = eleccion.querySelector("#lDead");
                const iDead = eleccion.querySelector("#iDead");

                const lAlta = eleccion.querySelector("#lAlta");
                const iAlta = eleccion.querySelector("#iAlta");

                const lEstado = eleccion.querySelector("#lEstado");
                const iEstado = eleccion.querySelector("#iEstado");

                const lDesc = eleccion.querySelector("#lDesc");
                const iDesc = eleccion.querySelector("#iDesc");

                if (eleccion.classList.contains("editMode")) {
                    iNombre.value = lNombre.textContent;
                    iTiempo.value = lTiempo.textContent;
                    iDead.value = lDead.textContent;
                    iAlta.value = lAlta.textContent;
                    iEstado.value = lEstado.textContent;
                    iDesc.value = lDesc.textContent;
                } else {
                    lNombre.textContent = iNombre.value;
                    lTiempo.textContent = iTiempo.value;
                    lDead.textContent = iDead.value;
                    lAlta.textContent = iAlta.value;
                    lEstado.textContent = iEstado.value;
                    lDesc.textContent = iDesc.value;
                }
            });

            document.getElementById('todoForm').reset();
        });
    </script>

</body>
</html>
